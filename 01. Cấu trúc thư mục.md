# Cấu trúc thư mục
## Mục lục
[I. Cấu trúc thư mục](#cautructhumuc)

<a name="cautructhumuc"></a>
## I.Cấu trúc thư mục
### 1. Khái niệm
Các hãng phân phối Linux hầu như thống nhất với nhau về tên các thư mục chuẩn trên Linux. Trong đó thư mục gốc bao giờ cũng là `/`. Bạn chú ý vì dấu `/` vừa là dấu biểu thị thư mục gốc vừa là dấu phân cách tên các thư mục với nhau trong đường dẫn tập tin (Linux không dùng dấu `\` như trong Windows để phân cách tên thư mục). Nếu đường dẫn không có dấu `/` thì chương trình sẽ tìm ở các thư mục mặc định và thư mục hiện tại.

Ví dụ đường dẫn `/usr/shared/fonts` là chỉ tới thư mục `fonts`, nằm bên trong thư mục `shared` và thư mục này nằm trong thư mục `usr`, thư mục `usr` nằm trong thư mục gốc.</br>
Dưới thư mục gốc thường có một số thư mục quan trọng sau:</br>

`/bin`: Lưu trữ tập những lệnh thường sử dụng nhất (như sao chép tập tin, tạo thư mục,…)</br>
`/boot`: Chứa phần nhân khởi động Linux và file cấu hình khởi động (grub cũng trong thư mục này)</br>
`/dev`: Chứa các tập tin đặc biệt tương ứng với các thiết bị có trong hệ thống</br>
`/etc`: Chứa các thiết lập của hệ thống</br>
`/home`: Chứa các thư mục con có tên ứng với User name của người dùng, mỗi thư mục đó chính là nơi lưu trữ toàn bộ dữ liệu của người dùng. Người dùng bình thường cũng chỉ được lưu trữ vào thư mục `home` của mình mà thôi.</br>
`/lib`: Chứa các thư viện dùng chung của các chương trình (giống file .dll trong Windows)</br>
`/root`: Thư mục `home` của người dùng có quyền cao nhất (root), người ngoài thường bị cấm truy cập.</br>
`/tmp`: Chứa các file tạm dùng trong quá trình linux hoạt động</br>
`/usr`: Chứa những thứ quan trọng như phần mềm, thư viện hàm, các dữ liệu dùng chung…</br>
`/var`: Chứa một loạt những thứ lỉnh kỉnh còn lại</br>

Ngoài ra còn một vài thư mục khác như `/media`, `/mnt` là nơi lấy chỗ `mount` (kết nối) cho những thiết bị lưu trữ khác như USB, CDROM,… Thư mục `/proc` lại chứa những tập tin ứng với những tiến trình `process` đang hoạt động (bạn sẽ thấy cái tương tự trong Task manager của Windows).

Phần mềm trên Linux khi cài đặt không có một thư mục chuẩn nào như thư mục Program Files trên Windows, thay vào đó từng phần của chúng được lưu trong các thư mục khác nhau.

Thư mục quan trọng nhất với bạn chỉ có thư mục `/home/[tên người dùng]` mà thôi. Thư mục này chính là nơi bạn sẽ lưu trữ tất cả những file dữ liệu của bạn, những file cấu hình, thiết lập, tùy chỉnh của bạn cũng được lưu ở đây. Thư mục nhà có thể được đại diện bởi kí tự `~`. Ví dụ `~/docs` là chỉ thư mục `docs` nằm trong thư mục `home` của bạn đó.

# Vị trí ứng dụng
Dựa trên các bản phân phối, chương trình, các gói phần mềm riêng được cài đặt trong các thư mục khác nhau. Nhìn chung các chương trình thực thi nên ở các thư mục sau:</br>
/bin</br>
/usr/bin</br>
/sbin</br>
/usr/sbin</br>
/opt</br>

Một cách khác là sử dụng tiện ích `which`. Ví dụ, để tìm chính xác vị trí của chương trình diff trong file system</br>
$ which python</br></br>
/bin/python
Nếu vẫn không tìm thấy chương trình thì ta có thể dùng `whereis`, bởi vì phạm vi tìm kiếm của nó rộng trong cả hệ thống file

# Truy cập Directories
Một số command hữu ích:

| Command | Result |
|---------|--------|
| cd | Chuyển về thư mục home |
| cd .. |	Chuyển về thư mục cha |
| cd -	| Chuyển về thư mục vừa rời đi trước đó |
| cd /	| Chuyển đến thư mục root(/) |
| cd /home/ | Chuyển đến thư mục /home/ |

# Filesystem
Command `tree` là cách hay để có thể nhìn toàn cảnh về cây thư mục của hệ thống. Một số các command hữu ích sau:

| Command	| Result |
|---------|--------|
| ls| Liệt kê nội dung của thư mục đang hiện tại làm việc |
| ls -a | Liệt kê thêm các file ẩn |
| ls -la| Hiển thị thêm các thông tin chi tiết của file và thư mục |
| tree |	Hiển thị cây thư mục của toàn bộ hệ thống filesystem |
| tree -d |	Chỉ hiện thị cây các thư mục mà bỏ qua danh sách các file |

# Hard link và Symbolic link
Một số sự khác biệt cơ bản của hard link và soft link

Hard link: Khi tạo ra một file mới hard link đến file cũ thì hai file này sẽ cùng tham chiếu tới 1 vùng nhớ chứa địa chỉ của data, nên khi thay đổi nội dung từ 1 file thì file kia cũng thay đổi theo và khi xóa file cũ đi thì file mới đó không ảnh hưởng.

Soft link: Khi tạo 2 file soft link tới nhau thì file mới sẽ trỏ tới vùng địa chỉ của file mới, nên khi xóa file cũ đi, file mới sẽ không thể truy cập đến dữ liệu được nữa.

Command `ln` có thể sử dụng để tạo hard link hoặc soft link, cũng như symnolic link hoặc symlink. Hai loại này rất phổ biến trên các hệ điều hành dựa trên UNIX-based.

Giả sử có file1.txt và tạo hard link là file2.txt

	$ ln file1.txt file2.txt
Kiểm tra sự tồn tại của hai file này.

	$ ls -l file*
	-rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file1.txt
	-rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file2.txt
Thêm option -i ta sẽ thấy được ở cột đầu tiên là số i-node, và hai số này giống hệt nhau tức là đang cùng trỏ tới một vùng nhớ

	$ ls -li file*
	337729 -rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file1.txt
	337729 -rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file2.txt
Symbolic or Soft links được tạo với option -s như sau:

	$ ln -s file1.txt file4.txt
	trang@ip-172-31-22-1:~/test$ ls -li file*
	337729 -rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file1.txt
	337729 -rw-rw-r-- 2 trang trang 11 Jun  6 03:45 file2.txt
	304423 lrwxrwxrwx 1 trang trang  9 Jun  6 04:06 file4.txt -> file1.txt
Ở đây file4.txt không còn xuất hiện như tệp thông thường nữa, nó là một điểm trỏ tới file1.txt và cũng có số inode khác nhau (cột đầu tiên), quyền sẽ luôn là lrwxrwxrwx. Chúng cực kỳ tiện lợi khi có thể dễ dàng sửa đổi để trỏ tới các điểm khác. Một cách dễ dàng tạo shortcut từ thư mục home của bạn cho một đường dẫn dài là tạo một symbolic link.

Không giống như hard link, soft link có thể trỏ đến các đối tượng ngày trên các filesystem khác nhau (hoặc các partitions), cái mà có thể có hoặc không có sẵn thậm chí không tồn tại. Trong trường hợp link không trỏ tới các đối tượng tồn tại hoặc có sẵn, thì đường link đó sẽ bị treo, lơ lửng.

Hardlink cũng rất hữu ích, chúng tiết kiệm băng thông, nhưng phải cẩn thận với việc sử dụng nó.
# Tài liệu tham khảo
- https://github.com/trangnth/Report_Intern/blob/master/Linux-note/1.%20Basic_commands.md
- https://saylinux.wordpress.com/2007/04/27/he_thong_tap_tin_trong_linux/
